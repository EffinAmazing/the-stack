{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/core/interceptors/no-cache-headers.interceptor.ts","webpack:///src/app/core/services/blueprints.service.ts","webpack:///src/app/modules/blueprint/blueprint-routing.module.ts","webpack:///src/app/modules/blueprint/blueprint.module.ts","webpack:///src/app/modules/blueprint/components/builder/builder.component.html","webpack:///src/app/modules/blueprint/components/builder/builder.component.ts","webpack:///src/app/modules/blueprint/components/tools-list/tools-list.component.ts","webpack:///src/app/modules/blueprint/components/tools-list/tools-list.component.html","webpack:///src/app/modules/blueprint/pages/build-stack/build-stack.component.ts","webpack:///src/app/modules/blueprint/pages/build-stack/build-stack.component.html","webpack:///src/app/modules/blueprint/pages/share/share.component.ts","webpack:///src/app/modules/blueprint/pages/share/share.component.html","webpack:///src/app/modules/home/home-routing.module.ts","webpack:///src/app/modules/home/home.module.ts","webpack:///src/app/modules/home/pages/home/home.component.ts","webpack:///src/app/modules/home/pages/home/home.component.html","webpack:///src/app/shared/mappers/response-mapper.helper.ts","webpack:///src/app/shared/modules/material/buttons-indicators/buttons-indicators.module.ts","webpack:///src/app/shared/modules/material/common-behaviors/common-behaviors.module.ts","webpack:///src/app/shared/modules/material/forms-controls/forms-controls.module.ts","webpack:///src/app/shared/modules/material/layout/layout.module.ts","webpack:///src/app/shared/shared.module.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","loadChildren","HomeModule","BlueprintModule","redirectTo","pathMatch","AppRoutingModule","forRoot","imports","AppComponent","title","selector","templateUrl","styleUrls","AppModule","provide","useClass","multi","declarations","providers","bootstrap","NoCacheHeadersInterceptor","request","next","authReq","clone","setHeaders","handle","BlueprintsService","http","mapper","serverURI","domain","mapResponse","get","nodeID","data","put","ids","post","providedIn","component","BlueprintRoutingModule","forChild","schemas","$event","event","stopPropagation","containerOffset","dotRadius","lineGenerator","curve","BuilderComponent","positionNodeChanged","nodes","showNodes","listOfArrows","connectedLines","svgD3","offsetX","offsetY","maxItems","arrToChange","index","loadedNodes","subscribe","console","log","list","forEach","nodeId","item","push","hide","position","x","yIndex","Math","floor","xIndex","y","promises","map","props","emit","all","result","err","node","source","_dragRef","_activeTransform","activeArrow","relesed","end","start","pos","lineId","select","attr","remove","lines","filter","evt","length","container","stackWorkFlow","nativeElement","rectContainer","getBoundingClientRect","X","Y","pointers","target","classList","contains","parentNode","rect","querySelector","genrateDots","Xpos","Ypos","x1","y1","radAngle","atan2","PI","degAngle","part","diapason","elRef","arr","diffX","diffY","direction","append","handleMouseMove","handleClickOnWorkspace","ToolsListComponent","BuildStackComponent","service","route","router","nodesList","categories","changedNodes$","nodesForUpdate","hideList","loaded","isError","errMessage","queryParams","params","getDomainTools","hidden","tool","tools","find","atool","toolId","cat","proceedNodes","completedProceedNodes","force","search","name","updateNodeTool","res","hideNodes","navigateByUrl","handleHideList","ShareComponent","HomeRoutingModule","HomeComponent","pattern","invalid","value","submitDomain","ResponseMappers","observable","pipe","response","error","filters","keyName","join","ButtonsIndicatorsModule","CommonBehaviorsModule","FormsControlsModule","LayoutModule","SharedModule","environment","production","bootstrapModule"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { HomeModule } from './modules/home/home.module';\r\n\r\n\r\nconst routes: Routes = [\r\n  { \r\n    path: \"home\", \r\n    loadChildren: async () => { \r\n      const { HomeModule } =  await import('./modules/home/home.module');\r\n      return HomeModule;\r\n    },\r\n  },\r\n  {\r\n    path: \"blueprints\",\r\n    loadChildren: async () => {\r\n      const { BlueprintModule } = await import('./modules/blueprint/blueprint.module');\r\n      return BlueprintModule;\r\n    }\r\n  },\r\n  {\r\n    path: '',\r\n    redirectTo: 'home',\r\n    pathMatch: 'full'\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  title = 'March Blueprint';\r\n}\r\n","\r\n<router-outlet></router-outlet>","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { HTTP_INTERCEPTORS } from \"@angular/common/http\";\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { BlueprintModule } from './modules/blueprint/blueprint.module';\r\nimport { HomeModule } from './modules/home/home.module';\r\nimport { NoCacheHeadersInterceptor } from \"./core/interceptors/no-cache-headers.interceptor\";\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    BrowserAnimationsModule,\r\n    BlueprintModule,\r\n    HomeModule\r\n  ],\r\n  providers: [\r\n    {\r\n      provide: HTTP_INTERCEPTORS,\r\n      useClass: NoCacheHeadersInterceptor,\r\n      multi: true\r\n    }\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  HttpRequest,\r\n  HttpHandler,\r\n  HttpEvent,\r\n  HttpInterceptor\r\n} from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class NoCacheHeadersInterceptor implements HttpInterceptor {\r\n\r\n  constructor() {}\r\n\r\n  intercept(request: HttpRequest<unknown>, next: HttpHandler): Observable<HttpEvent<unknown>> {\r\n    const authReq = request.clone({\r\n        setHeaders: {\r\n            'Cache-Control': 'no-cache'\r\n        }\r\n    });\r\n    return next.handle(authReq);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders, HttpResponse } from '@angular/common/http';\r\nimport { Observable, of } from 'rxjs';\r\nimport { BluePrintResp, BluePrintTool } from \"../../shared/models/tool\";\r\nimport { ResponseMappers } from '../../shared/mappers/response-mapper.helper';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BlueprintsService {\r\n  serverURI: string = \"http://198.211.96.29:9000/\";\r\n\r\n  constructor( private http: HttpClient, private mapper: ResponseMappers ) { }\r\n\r\n  getDomainTools(domain: string): Observable<BluePrintResp> {\r\n    return this.mapper.mapResponse(this.http.get<BluePrintResp>(`${this.serverURI}blueprints/tools?domain=${domain}`));\r\n  }\r\n\r\n  updateNodeTool(nodeID: string, data ): Observable<BluePrintTool>{\r\n    return this.mapper.mapResponse(this.http.put<BluePrintTool>(`${this.serverURI}toolsnodes/${nodeID}`, { data }));\r\n  }\r\n\r\n  hideNodes(ids: string[]): Observable<any> {\r\n    return this.mapper.mapResponse(this.http.post(`${this.serverURI}toolshide/`, { ids } ));\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { BuildStackComponent } from \"./pages/build-stack/build-stack.component\";\r\nimport { ShareComponent } from \"./pages/share/share.component\";\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: \"build\",\r\n    component: BuildStackComponent\r\n  },\r\n  {\r\n    path: \"share\",\r\n    component: ShareComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class BlueprintRoutingModule { }\r\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpClientModule } from '@angular/common/http'; \r\n\r\nimport { BlueprintRoutingModule } from './blueprint-routing.module';\r\nimport { BuildStackComponent } from './pages/build-stack/build-stack.component';\r\nimport { ShareComponent } from './pages/share/share.component';\r\nimport { SharedModule } from '../../shared/shared.module';\r\nimport { CommonBehaviorsModule } from '../../shared/modules/material/common-behaviors/common-behaviors.module';\r\nimport { ButtonsIndicatorsModule } from '../../shared/modules/material/buttons-indicators/buttons-indicators.module';\r\nimport { FormsControlsModule } from '../../shared/modules/material/forms-controls/forms-controls.module';\r\nimport { LayoutModule } from '../../shared/modules/material/layout/layout.module';\nimport { BuilderComponent } from './components/builder/builder.component';\nimport { ToolsListComponent } from './components/tools-list/tools-list.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [BuildStackComponent, ShareComponent, BuilderComponent, ToolsListComponent],\r\n  imports: [\r\n    CommonModule,\r\n    BlueprintRoutingModule,\r\n    HttpClientModule,\r\n    SharedModule,\r\n    CommonBehaviorsModule,\r\n    ButtonsIndicatorsModule,\r\n    FormsControlsModule,\r\n    LayoutModule\r\n  ],\r\n  schemas: [ CUSTOM_ELEMENTS_SCHEMA ]\r\n\r\n})\r\nexport class BlueprintModule { }\r\n","<div>\n    <div class=\"stackWorkflow\" #stackWorkFlow (mousemove)=\"handleMouseMove($event)\" (click)=\"handleClickOnWorkspace()\">\n        <svg id=\"paint\"  width=\"1080\" height=\"600\">\n          <defs>\n            <marker \n              id=\"arrow-marker\" \n              markerWidth=\"8\" \n              markerHeight=\"12\" \n              refX=\"4\" \n              refY=\"6\" \n              orient=\"auto-start-reverse\" \n              markerUnits=\"userSpaceOnUse\">\n                <path d=\"M2,0 L8,6 L2,12 L0,10 L4,6 L0,2 z\" style=\"stroke-width: 1;z-index: 5;\"></path>\n              </marker>\n            </defs>\n        </svg>\n        <div class=\"toolNode\" *ngFor=\"let node of showNodes\" \n          cdkDrag \n          [cdkDragFreeDragPosition]=\"hasCoords(node.position)?node.position:{x: 0, y: 0}\" \n          (cdkDragReleased)=\"relisedMove($event, node)\"\n          (cdkDragMoved)=\"$event.event.stopPropagation();  handleNodeMove($event, node)\"\n          (cdkDragStarted)=\"handleStartDrag(node)\"\n          (mouseenter)=\"handleMouseOverNode($event, node)\"\n          (mouseleave)=\"handleMouseOutNode($event, node)\" >\n            {{ node.tool?.name }}\n            <div class=\"pointers\">\n              <div class=\"pointer-Left\" (click)=\"handleAddArrowClick($event, 'Left', node)\"></div>\n              <div class=\"pointer-Right\" (click)=\"handleAddArrowClick($event, 'Right', node)\"></div>\n              <div class=\"pointer-LeftTop\" (click)=\"handleAddArrowClick($event, 'LeftTop', node)\"></div>\n              <div class=\"pointer-RightTop\" (click)=\"handleAddArrowClick($event, 'RightTop', node)\"></div>\n              <div class=\"pointer-MiddleTop\" (click)=\"handleAddArrowClick($event, 'MiddleTop', node)\"></div>\n              <div class=\"pointer-LeftBottom\" (click)=\"handleAddArrowClick($event, 'LeftBottom', node)\"></div>\n              <div class=\"pointer-RightBottom\" (click)=\"handleAddArrowClick($event, 'RightBottom', node)\"></div>\n              <div class=\"pointer-MiddleBottom\" (click)=\"handleAddArrowClick($event, 'MiddleBottom', node)\"></div>\n            </div>\n    </div>\n</div>\n","import { Component, OnInit, ViewChild, ElementRef, Input, Output, EventEmitter } from '@angular/core';\nimport { Tool, BluePrintTool } from '../../../../shared/models/tool';\nimport { Observable } from 'rxjs';\nimport * as d3 from 'd3';\n\nconst containerOffset = 20;\nconst dotRadius = 9;\nconst lineGenerator = d3.line().curve(d3.curveCardinal);\n\n@Component({\n  selector: 'app-builder',\n  templateUrl: './builder.component.html',\n  styleUrls: ['./builder.component.scss']\n})\nexport class BuilderComponent implements OnInit {\n  @ViewChild('stackWorkFlow') stackWorkFlow: ElementRef;\n  @Output() positionNodeChanged: EventEmitter<any> = new EventEmitter();\n  @Input() loadedNodes: Observable<any>;\n\n  nodes: BluePrintTool[] = [];\n  // nodes: BluePrintTool[] = [];\n  showNodes: BluePrintTool[] = [];\n  listOfArrows: Array<{\n    start: { nodeId: string, x: number, y: number, pos?: string },\n    end: { nodeId: string, x: number, y: number, pos?: string },\n    lineId: string\n  }> = [];\n  connectedLines: Array<any> = [];\n  activeArrow: {\n    start: { nodeId: string, x: number, y: number, elRef?: any, pos?: string  },\n    end: { x: number, y: number, nodeId?: string, elRef?: any, pos?: string  },\n    lineId: string,\n    relesed: boolean\n  };\n  svgD3: any;\n\n  constructor() { }\n\n  ngOnInit(): void {\n    this.svgD3 = d3.select('svg#paint');\n\n    const offsetX = 200;\n    const offsetY = 60;\n    const maxItems = 5;\n    let arrToChange = [];\n\n    let index = 0;\n    this.loadedNodes.subscribe((data) => {\n      this.nodes = [];\n      this.showNodes = [];\n      console.log(data);\n      if (data.list) {\n        data.list.forEach((nodeId) => {\n          const item = data.nodes[nodeId];\n          this.nodes.push(item);\n          if (!item.hide) {\n            if (typeof item.position.x !== 'number') {\n              const yIndex = Math.floor(index / maxItems);\n              const xIndex = (index - yIndex * maxItems);\n              item.position.y = yIndex * offsetY;\n              item.position.x = xIndex * offsetX;\n              arrToChange.push({nodeId: item.id, position: item.position});\n              index++;\n            }\n            console.log(item.position);\n            this.showNodes.push(item);\n          }\n        });\n\n        const promises = arrToChange.map(async (props) => {\n          this.positionNodeChanged.emit(props);\n          return props;\n        });\n\n        Promise.all(promises).then((result) => {\n          console.log(result);\n        }).catch((err) => {\n          console.log(err);\n        });\n      }\n    });\n  }\n\n  public relisedMove(data, node: BluePrintTool) {\n    console.log(data.source._dragRef._activeTransform);\n\n    /*  */\n\n    this.positionNodeChanged.emit({ nodeId: node.id, position: data.source._dragRef._activeTransform  });\n\n    this.connectedLines = [];\n\n  }\n\n  public hasCoords(position) {\n    if (typeof position.x === 'number' && typeof position.y) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  public handleClickOnWorkspace() {\n    if (this.activeArrow) {\n      if (!this.activeArrow.relesed) {\n        if (this.activeArrow.end.nodeId) {\n          this.listOfArrows.push({\n            start: {\n              x: this.activeArrow.start.x,\n              y: this.activeArrow.start.y,\n              nodeId: this.activeArrow.start.nodeId,\n              pos: this.activeArrow.start.pos },\n            end: {\n              x: this.activeArrow.end.x,\n              y: this.activeArrow.end.y,\n              nodeId: this.activeArrow.end.nodeId,\n              pos: this.activeArrow.end.pos\n            },\n            lineId: this.activeArrow.lineId + '-' + this.activeArrow.end.nodeId\n          });\n\n          this.svgD3.select('path#' + this.activeArrow.lineId).attr('id', this.activeArrow.lineId + '-' + this.activeArrow.end.nodeId );\n\n          this.activeArrow = null;\n        } else {\n          this.svgD3.select('path#' + this.activeArrow.lineId).remove();\n          this.activeArrow = null;\n        }\n      } else {\n        this.activeArrow.relesed = false;\n      }\n    }\n  }\n\n  public handleStartDrag(node) {\n    const lines = this.listOfArrows.filter((item) => item.start.nodeId === node.id || item.end.nodeId === node.id );\n    this.connectedLines = lines;\n  }\n\n  public handleNodeMove(evt, node) {\n    if (this.connectedLines.length) {\n      const container = this.stackWorkFlow.nativeElement;\n\n      const rectContainer = container.getBoundingClientRect();\n\n      const X = rectContainer.x;\n      const Y = rectContainer.y;\n      let pointers = evt.event.target;\n      if (!pointers.classList.contains('pointers')) {\n        pointers = evt.event.target.parentNode;\n      }\n      console.log(this.connectedLines);\n      this.connectedLines.forEach((item) => {\n        let offsetX = dotRadius;\n        if (item.start.nodeId ===  node.id) {\n          const rect = pointers.querySelector('.pointer-' + item.start.pos).getBoundingClientRect();\n          const pos = {\n            y: rect.y - Y - containerOffset + dotRadius,\n            x: rect.x - X - containerOffset + dotRadius\n          };\n\n          item.start.x = pos.x;\n          item.start.y = pos.y;\n\n          this.svgD3.select('path#' + item.lineId)\n            .attr('d', lineGenerator(this.genrateDots(\n              [item.start.x, item.start.y],\n              [item.end.x, item.end.y])));\n        }\n\n        if (item.end.nodeId ===  node.id) {\n          const rect = pointers.querySelector('.pointer-' + item.end.pos).getBoundingClientRect();\n\n          if (item.end.pos === 'Left') { offsetX = dotRadius / 2; }\n          if (item.end.pos === 'Right') { offsetX = dotRadius * 2; }\n          const pos = {\n            y: rect.y - Y - containerOffset + dotRadius,\n            x: rect.x - X - containerOffset + offsetX\n          };\n\n          item.end.x = pos.x;\n          item.end.y = pos.y;\n\n          this.svgD3.select('path#' + item.lineId)\n            .attr('d', lineGenerator(this.genrateDots(\n              [item.start.x, item.start.y],\n              [item.end.x, item.end.y], item.end.pos !== 'Left' || item.end.pos !== 'Right' ? 'Top' : '')));\n        }\n      });\n    }\n  }\n\n  public handleMouseOverNode(evt, node) {\n    if (this.activeArrow) {\n      console.log('over', evt, node);\n      const container = this.stackWorkFlow.nativeElement;\n      const rectContainer = container.getBoundingClientRect();\n\n      const X = rectContainer.x;\n      const Y = rectContainer.y;\n      let Xpos = 'Left';\n      let Ypos = '';\n      const x1 = evt.x - X - 15;\n      const y1 = evt.y - Y - 15;\n      const radAngle = Math.atan2(x1 - this.activeArrow.start.x, y1 - this.activeArrow.start.y);\n      console.log(x1, y1, radAngle, radAngle * 180 / Math.PI + 180);\n      const degAngle = radAngle * 180 / Math.PI + 180;\n      const part = 8;\n      const diapason = 360 / part / 2;\n      if (degAngle < diapason || degAngle > 360 - diapason || degAngle > 180 - diapason && degAngle < 180 + diapason ) { Xpos = 'Middle'; }\n      if (degAngle >= diapason && degAngle <= 180 - diapason) { Xpos = 'Right'; }\n      if (degAngle >= 180 + diapason && degAngle <= 360 - diapason) { Xpos = 'Left'; }\n      if (degAngle < 90 - diapason || degAngle > 270 + diapason ) { Ypos = 'Bottom'; }\n      if (degAngle > 90 + diapason && degAngle < 270 - diapason) { Ypos = 'Top'; }\n      console.log(Xpos, Ypos, degAngle);\n      /* */\n\n      const rect = evt.target.querySelector('.pointers .pointer-' + Xpos + Ypos).getBoundingClientRect();\n      this.activeArrow.end.nodeId = node.id;\n      this.activeArrow.end.elRef = evt.target;\n      this.activeArrow.end.pos = Xpos + Ypos;\n      let offsetX = dotRadius;\n      if ( Xpos + Ypos === 'Right') { offsetX = dotRadius * 2; }\n      if ( Xpos + Ypos === 'Left') { offsetX = dotRadius / 2; }\n      const pos = {\n        y: rect.y - Y - containerOffset + dotRadius,\n        x: rect.x - X - containerOffset + offsetX\n      };\n\n      this.activeArrow.end.x = pos.x;\n      this.activeArrow.end.y = pos.y;\n\n      this.svgD3.select('path#' + this.activeArrow.lineId)\n        .attr('d', lineGenerator(this.genrateDots(\n          [this.activeArrow.start.x, this.activeArrow.start.y],\n          [this.activeArrow.end.x, this.activeArrow.end.y], Ypos)));\n\n    }\n  }\n\n  private genrateDots(start, end, Ypos?) {\n    const arr = [start];\n    const diffX = end[0] - start[0];\n    const diffY = end[1] - start[1];\n    console.log(diffX, diffY);\n\n    arr.push([ start[0] + diffX * 0.35, start[1] + diffY * 0.15]);\n    if (typeof Ypos === 'string' && Ypos !== '') {\n      arr.push([ start[0] + diffX * 0.90, start[1] + diffY * 0.65]);\n    } else {\n      arr.push([ start[0] + diffX * 0.70, start[1] + diffY * 0.85]);\n    }\n\n    console.log(arr);\n    arr.push(end);\n    return arr;\n  }\n\n  public handleMouseOutNode(evt, node) {\n    // console.log('out', evt, node);\n    if (this.activeArrow) {\n      this.activeArrow.end.nodeId = null;\n      this.activeArrow.end.elRef = null;\n    }\n  }\n\n  public handleAddArrowClick(evt, direction, node?) {\n    if (!this.activeArrow) {\n      const target = evt.target;\n      const container = this.stackWorkFlow.nativeElement;\n      const rect = target.getBoundingClientRect();\n      const rectContainer = container.getBoundingClientRect();\n\n      const X = rectContainer.x;\n      const Y = rectContainer.y;\n      console.log(container);\n\n      const pos = {\n        y: rect.y - Y - containerOffset + dotRadius,\n        x: rect.x - X - containerOffset + dotRadius\n      };\n\n      console.log(pos, direction);\n      this.activeArrow = {\n        start: { nodeId: node.id, x: pos.x, y: pos.y, pos: direction },\n        end: { x: pos.x, y: pos.y },\n        lineId: 'line-' + node.id,\n        relesed: true\n      };\n\n      this.svgD3.append('path')\n        .attr('id', 'line-' + node.id)\n        .attr('class', 'line')\n        .attr('d', lineGenerator([ [pos.x, pos.y], [pos.x + 20, pos.y + 20] ]))\n        .attr('stroke', '#1c57a4')\n        .attr('stroke-width', 2)\n        .attr('fill', 'transparent')\n        .attr('marker-end', 'url(#arrow-marker)');\n    }\n  }\n\n  public handleMouseMove(evt) {\n    // console.log(this.activeArrow);\n    if (this.activeArrow) {\n      console.log('move');\n      if (!this.activeArrow.end.nodeId) {\n        const container = this.stackWorkFlow.nativeElement;\n        const rectContainer = container.getBoundingClientRect();\n\n        const X = rectContainer.x;\n        const Y = rectContainer.y;\n\n        const pos = { y: evt.y - Y - containerOffset, x: evt.x - X - containerOffset };\n\n        this.activeArrow.end.x = pos.x;\n        this.activeArrow.end.y = pos.y;\n        console.log(lineGenerator([ [this.activeArrow.start.x, this.activeArrow.start.y], [pos.x, pos.y] ]));\n\n        this.svgD3.select('path#' + this.activeArrow.lineId)\n          .attr('d', lineGenerator([ [this.activeArrow.start.x, this.activeArrow.start.y], [pos.x, pos.y] ]));\n      }\n    }\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-tools-list',\n  templateUrl: './tools-list.component.html',\n  styleUrls: ['./tools-list.component.scss']\n})\nexport class ToolsListComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>tools-list works!</p>\n","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { BlueprintsService } from '../../../../core/services/blueprints.service';\r\nimport { Tool, BluePrintTool } from '../../../../shared/models/tool';\r\nimport { Observable, BehaviorSubject } from 'rxjs';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport * as d3 from 'd3';\r\n\r\n@Component({\r\n  selector: 'app-build-stack',\r\n  templateUrl: './build-stack.component.html',\r\n  styleUrls: ['./build-stack.component.scss']\r\n})\r\nexport class BuildStackComponent implements OnInit {\r\n  @ViewChild('stackWorkFlow') stackWorkFlow: ElementRef;\r\n  nodes: BluePrintTool[] = [];\r\n  nodesList: string[] = [];\r\n  showNodes: BluePrintTool[] = [];\r\n  categories: any = { \"None\": [] };\r\n  changedNodes$: BehaviorSubject<any> = new BehaviorSubject({});\r\n  nodesForUpdate: any = [];\r\n  hideList = true;\r\n  loaded = false;\r\n  domain = '';\r\n  isError = false;\r\n  errMessage = 'Something went wrong plaese check domain and try again';\r\n\r\n  constructor(private service: BlueprintsService, private route: ActivatedRoute, private router: Router) {\r\n    this.route.queryParams.subscribe((params: any) => {\r\n      this.domain = params.domain;\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.domain) {\r\n      this.service.getDomainTools(this.domain).subscribe((data) => {\r\n        console.log(data);\r\n        let hidden = 0;\r\n        data.nodes.forEach((item) => {\r\n          const tool = data.tools.find((atool) =>  atool.id === item.toolId );\r\n          item.tool = tool;\r\n          this.nodes[item.id] = item;\r\n          this.nodesList.push(item.id);\r\n          if (item.hide ) { hidden++; }\r\n          if (item.tool.categories) {\r\n            item.tool.categories.forEach((cat) => {\r\n              if (this.categories[cat]) {\r\n                this.categories[cat].push(item.id);\r\n              } else {\r\n                this.categories[cat] = [ item.id ];\r\n              }\r\n            });\r\n          } else {\r\n            this.categories['None'].push(item.id);\r\n          }\r\n          /*if (!item.hide) {\r\n            this.showNodes.push(item);\r\n          }*/\r\n        });\r\n\r\n        if (data.nodes.length - hidden > 50) {\r\n          this.proceedNodes(data.nodes.length, hidden);\r\n        } else {\r\n          this.completedProceedNodes();\r\n        }\r\n        // console.log(this.nodes, this.nodes.length);\r\n      }, err => this.isError = true );\r\n\r\n    } else {\r\n      this.isError = true;\r\n    }\r\n  }\r\n\r\n  private proceedNodes(all, hidden, force?) {\r\n    if (force) {\r\n      this.nodesList.forEach((nodeId) => {\r\n        const item = this.nodes[nodeId];\r\n        if (!item.hide && all - hidden > 50 ) {\r\n\r\n          if (item.tool.categories[0].search('Analytics') === -1 && item.tool.name !== this.domain) {\r\n            item.hide = true;\r\n            hidden++;\r\n            this.nodesForUpdate.push(item.id);\r\n          }\r\n        }\r\n      });\r\n\r\n      this.completedProceedNodes();\r\n    } else {\r\n      this.nodesList.forEach((nodeId) => {\r\n        const item = this.nodes[nodeId];\r\n        if (!item.tool.categories && !item.hide) {\r\n          item.hide = true;\r\n          this.nodesForUpdate.push(item.id);\r\n          hidden++;\r\n        }\r\n      });\r\n\r\n      if (all - hidden <= 50) {\r\n        this.completedProceedNodes();\r\n      } else {\r\n        console.log(\"force\");\r\n        this.proceedNodes(all, hidden, true);\r\n      }\r\n    }\r\n  }\r\n\r\n  public updatedNodePosiotion(data) {\r\n    console.log('aaa', data);\r\n    this.service.updateNodeTool(data.nodeId, { position: data.position }).subscribe((res) => {\r\n      const tool = this.nodes[data.nodeId].tool;\r\n      res.tool = this.nodes[data.nodeId].tool;\r\n      this.nodes[data.nodeId] = res;\r\n    });\r\n  }\r\n\r\n  private completedProceedNodes() {\r\n    console.log(this.nodesForUpdate);\r\n    this.loaded = true;\r\n    if (this.nodesForUpdate.length) {\r\n      this.service.hideNodes(this.nodesForUpdate).subscribe((data) => {\r\n        this.changedNodes$.next({ nodes: this.nodes, list: this.nodesList });\r\n      });\r\n    } else {\r\n      this.changedNodes$.next({ nodes: this.nodes, list: this.nodesList });\r\n    }\r\n  }\r\n\r\n  public moveToHome() {\r\n    this.router.navigateByUrl('/home');\r\n  }\r\n\r\n  public handleHideList() {\r\n    this.hideList = !this.hideList;\r\n  }\r\n\r\n  public handleHideNodeItem(data: BluePrintTool) {\r\n    if (!data.hide) {\r\n      data['hide'] = true;\r\n    } else {\r\n      data.hide = false;\r\n    }\r\n\r\n    this.service.updateNodeTool(data.id, { hide: data.hide }).subscribe((res) => {\r\n      // const nodeIndex = this.nodes.findIndex((item) => item.id = res.id );\r\n      res.tool = this.nodes[data.id].tool;\r\n      this.nodes[data.id] = res;\r\n      this.changedNodes$.next({ nodes: this.nodes, list: this.nodesList  });\r\n      // this.margeShowNodes();\r\n    });\r\n  }\r\n\r\n  private margeShowNodes() {\r\n    this.showNodes = [];\r\n    this.nodes.forEach((item) => {\r\n      if (!item.hide) {\r\n        this.showNodes.push(item);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n}\r\n","<div class=\"main\">\r\n    <div class=\"mt-container\"> \r\n      <h2> Build Your Stack </h2>   \r\n\r\n      <div class=\"stackContainer\">\r\n        <div class=\"stackActions\" *ngIf=\"loaded\" >\r\n          <button mat-raised-button (click)=\"handleHideList()\"> <mat-icon>list</mat-icon> All Tools </button>\r\n        </div>\r\n        <div class=\"loading-data-section\" *ngIf=\"!loaded && !isError\">\r\n          <mat-spinner></mat-spinner>\r\n          <p class=\"loading-message\"> Data being processed please wait... </p>\r\n        </div>\r\n        <div *ngIf=\"isError\" class=\"error-loading-alert\">\r\n          <mat-icon color=\"accent\">warning</mat-icon>\r\n          <p class=\"error-message\"> {{errMessage}} </p>\r\n          <button mat-button color=\"primary\" (click)=\"moveToHome()\"> Try Again </button>\r\n        </div>\r\n        <app-builder *ngIf=\"loaded\" [loadedNodes]=\"changedNodes$\" (positionNodeChanged)=\"updatedNodePosiotion($event)\"></app-builder>\r\n      </div>\r\n      <div [ngClass]=\"{'toolsList': true, 'hide': hideList}\"> \r\n        <div class=\"header-tools\"> \r\n          <div class=\"title\"> </div>\r\n          <button mat-icon-button (click)=\"handleHideList()\"><mat-icon>clear</mat-icon></button>\r\n        </div>\r\n        <div class=\"tools-node-items\">\r\n          <div class=\"node-item\" *ngFor=\"let nodeId of nodesList\"> \r\n            <mat-card>\r\n              <div class=\"item-categories\"> <b>Categories: </b>  {{ nodes[nodeId].tool && nodes[nodeId].tool.categories?(nodes[nodeId].tool.categories.join(',')):''  }} </div>\r\n              <p class=\"item-name\"> <b>Name: </b> {{ nodes[nodeId].tool?.name }} </p>\r\n              <p class=\"item-description\"> {{ nodes[nodeId].tool?.description }} </p>\r\n              <div class=\"actions\">\r\n                <mat-slide-toggle (change)=\"handleHideNodeItem(nodes[nodeId])\"\r\n                    class=\"example-margin\"\r\n                    [checked]=\"nodes[nodeId].hide\"\r\n                    [color]=\"'accent'\">\r\n                    Hide\r\n                </mat-slide-toggle>\r\n              </div>           \r\n            </mat-card>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-share',\r\n  templateUrl: './share.component.html',\r\n  styleUrls: ['./share.component.scss']\r\n})\r\nexport class ShareComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"main\">\r\n    <div class=\"mt-container\"> \r\n      <h2> Share you stack </h2>    \r\n    </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { HomeComponent } from \"./pages/home/home.component\";\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: HomeComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HomeRoutingModule { }\r\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA  } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\r\n\r\n\r\nimport { HomeRoutingModule } from './home-routing.module';\r\nimport { HomeComponent } from './pages/home/home.component';\r\nimport { SharedModule } from \"../../shared/shared.module\";\r\nimport { ButtonsIndicatorsModule } from \"../../shared/modules/material/buttons-indicators/buttons-indicators.module\";\r\nimport { FormsControlsModule } from \"../../shared/modules/material/forms-controls/forms-controls.module\";\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [HomeComponent],\r\n  imports: [\r\n    CommonModule,\r\n    HomeRoutingModule,\r\n    SharedModule,\r\n    FormsControlsModule,\r\n    ButtonsIndicatorsModule,\r\n    FormsModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  schemas: [ CUSTOM_ELEMENTS_SCHEMA ]\r\n})\r\nexport class HomeModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {FormControl, Validators} from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.scss']\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  domain = new FormControl('', [Validators.pattern(/^([a-z.\\-]+(\\.)[a-z]{2,3})$/i)]);\r\n\r\n  constructor(private router: Router) { }\r\n\r\n  ngOnInit(): void {  }\r\n\r\n  submitDomain() {\r\n    if (!this.domain.invalid) {\r\n      this.router.navigateByUrl('/blueprints/build?domain=' + this.domain.value);\r\n    }\r\n  }\r\n}\r\n","<div class=\"main\">\r\n    <section class=\"mt-full-screen mt-flex\">\r\n        <div class=\"mt-container\">\r\n            <div class=\"form-doamin\">\r\n\r\n                <h2> Input Domain </h2>\r\n                <div>\r\n                    <mat-form-field appearance=\"outline\" class=\"input-domain\">\r\n                        <mat-label>Domain name:</mat-label>\r\n                        <input matInput placeholder=\"\" [formControl]=\"domain\" required>\r\n                        <mat-error *ngIf=\"domain.invalid\"> Please enter a valid domain </mat-error>\r\n                    </mat-form-field>\r\n                </div>\r\n                <div class=\"submit-domain\">\r\n                    <button mat-raised-button color=\"primary\" (click)=\"submitDomain()\">Submit</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { map, catchError } from 'rxjs/operators';\r\nimport { Observable } from 'rxjs';\r\nimport { throwError } from 'rxjs';\r\nimport { Promise } from 'q';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ResponseMappers {\r\n\r\n  constructor() { }\r\n\r\n  public mapResponse(observable: Observable<any>) {\r\n    return observable.pipe(\r\n      map( (response: any) => { \r\n          return response.result;\r\n      }),\r\n      catchError( error => {\r\n        if (error) {\r\n          return throwError(error);\r\n        }\r\n      })\r\n   );\r\n  }\r\n\r\n  public getParams(filters, keyName: string): string {\r\n    let params = ['?'];\r\n    if (filters && filters.length) {\r\n        filters.forEach(filter => {\r\n          params.push(`${keyName}=${filter}&`);\r\n        });\r\n    }\r\n\r\n    return params.join('');\r\n }\r\n}","import { NgModule } from '@angular/core';\r\n\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\r\nimport { MatChipsModule } from '@angular/material/chips';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [\r\n    MatButtonModule,\r\n    MatButtonToggleModule,\r\n    MatChipsModule,\r\n    MatIconModule,\r\n    MatProgressSpinnerModule\r\n  ],\r\n  exports: [\r\n    MatButtonModule,\r\n    MatButtonToggleModule,\r\n    MatChipsModule,\r\n    MatIconModule,\r\n    MatProgressSpinnerModule\r\n  ]\r\n})\r\nexport class ButtonsIndicatorsModule { }\r\n","import { NgModule } from '@angular/core';\n\nimport {DragDropModule} from '@angular/cdk/drag-drop';\n\n\n@NgModule({\n  declarations: [],\n  imports: [\n    DragDropModule\n  ],\n  exports: [\n    DragDropModule\n  ]\n})\nexport class CommonBehaviorsModule { }\n","import { NgModule } from '@angular/core';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [\r\n    MatInputModule,\r\n    MatFormFieldModule,\r\n    MatCheckboxModule,\r\n    MatSlideToggleModule\r\n  ],\r\n  exports: [\r\n    MatInputModule,\r\n    MatFormFieldModule,\r\n    MatCheckboxModule,\r\n    MatSlideToggleModule\r\n  ]\r\n})\r\nexport class FormsControlsModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport {MatCardModule} from '@angular/material/card';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [\r\n    MatCardModule\r\n  ],\r\n  exports: [\r\n    MatCardModule\r\n  ]\r\n})\r\nexport class LayoutModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsControlsModule } from './modules/material/forms-controls/forms-controls.module';\r\nimport { LayoutModule } from './modules/material/layout/layout.module';\r\nimport { ButtonsIndicatorsModule } from './modules/material/buttons-indicators/buttons-indicators.module';\r\nimport { CommonBehaviorsModule } from './modules/material/common-behaviors/common-behaviors.module';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [\r\n    CommonModule,\r\n    FormsControlsModule,\r\n    LayoutModule,\r\n    ButtonsIndicatorsModule,\r\n    CommonBehaviorsModule\r\n  ],\r\n})\r\nexport class SharedModule { }\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"]}